<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation &mdash; Tethys Platform 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Tethys Platform 0.1.0 documentation" href="index.html" />
    <link rel="next" title="Getting Started" href="getting_started.html" />
    <link rel="prev" title="Tethys Platform" href="features.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="getting_started.html" title="Getting Started"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="features.html" title="Tethys Platform"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Tethys Platform 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p><strong>Last Updated:</strong> October 30, 2014</p>
<p>This section describes how to install Tethys Platform. These installation instructions are optimized for Ubuntu 14.04,
which is the recommended platform for running Tethys Platform. However, these instructions should work with other
types of Linux with some adaptation.</p>
<div class="section" id="install-the-dependencies">
<h2>1. Install the Dependencies<a class="headerlink" href="#install-the-dependencies" title="Permalink to this headline">¶</a></h2>
<p>If you are using a Debian-based operating system (like Ubuntu), you can install the dependencies as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo apt-get install python-dev postgresql-9.3 libpq-dev postgresql-9.3-postgis-2.1 python-pip python-virtualenv git-core
</pre></div>
</div>
<p>If you not using a Debian-based operating system find the best way to install the following dependencies for your
operating system:</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Dependency</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Python</td>
<td><a class="reference external" href="https://www.python.org/download/releases/2.7/">Python Programming Language, version 2.7.</a></td>
</tr>
<tr class="row-odd"><td>PostgreSQL</td>
<td><a class="reference external" href="http://www.postgresql.org/download/">PostgreSQL database system, version 9.0 or higher (9.3 recommended).</a></td>
</tr>
<tr class="row-even"><td>PostGIS 2.1</td>
<td><a class="reference external" href="http://postgis.net/install">PostGIS spatial extension for PostgreSQL, version 2.1 or higher.</a></td>
</tr>
<tr class="row-odd"><td>GeoServer*</td>
<td><a class="reference external" href="http://docs.geoserver.org/stable/en/user/installation/index.html">GeoServer server for sharing geospatial data.</a></td>
</tr>
<tr class="row-even"><td>Tomcat*</td>
<td><a class="reference external" href="http://tomcat.apache.org/download-70.cgi">Tomcat open source Java Servlet, version 7.0.</a></td>
</tr>
<tr class="row-odd"><td>52°North WPS*</td>
<td><a class="reference external" href="http://52north.org/communities/geoprocessing/wps/installation.html">52°North open source web processing service for geoprocessing.</a></td>
</tr>
<tr class="row-even"><td>GRASS GIS*</td>
<td><a class="reference external" href="http://grass.osgeo.org/download/">GRASS GIS open source geospatial data management and analysis system, version 7.</a></td>
</tr>
<tr class="row-odd"><td>CKAN*</td>
<td><a class="reference external" href="http://docs.ckan.org/en/latest/maintaining/installing/index.html">CKAN open source data management system.</a></td>
</tr>
<tr class="row-even"><td>wps-grass-bridge*</td>
<td><a class="reference external" href="https://code.google.com/p/wps-grass-bridge/">Libraries and applications for easy and convenient GRASS7 GIS WPS integration.</a></td>
</tr>
<tr class="row-odd"><td>pip</td>
<td><a class="reference external" href="http://pip.readthedocs.org/en/latest/installing.html">Python package management and installation tool.</a></td>
</tr>
<tr class="row-even"><td>virtualenv</td>
<td><a class="reference external" href="http://virtualenv.readthedocs.org/en/latest/virtualenv.html#installation">virtualenv isolated Python environment creator.</a></td>
</tr>
<tr class="row-odd"><td>git</td>
<td><a class="reference external" href="http://git-scm.com/downloads">Git open source distributed version control system.</a></td>
</tr>
</tbody>
</table>
<p>* Note: The feature requiring this software is not fully implemented at this time and installation of this software is optional.</p>
</div>
<div class="section" id="configure-dependencies">
<h2>2. Configure Dependencies<a class="headerlink" href="#configure-dependencies" title="Permalink to this headline">¶</a></h2>
<p>Skip this step for now.</p>
<ul class="simple">
<li>PostGIS environmental variables to enable GDAL drivers</li>
</ul>
</div>
<div class="section" id="install-tethys-platform-into-a-python-virtual-environment">
<h2>3. Install Tethys Platform into a Python Virtual Environment<a class="headerlink" href="#install-tethys-platform-into-a-python-virtual-environment" title="Permalink to this headline">¶</a></h2>
<p>Python virtual environments are used to create isolated Python installations to avoid conflicts with dependencies of
other Python applications on the same system. The following commands should be executed in a a terminal.</p>
<ol class="loweralpha">
<li><p class="first">Create a Python virtual environment and activate it:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo mkdir -p /usr/lib/tethys
sudo chown `whoami` /usr/lib/tethys
virtualenv --no-site-packages /usr/lib/tethys
. /usr/lib/tethys/bin/activate
</pre></div>
</div>
</li>
</ol>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>The final command above activates the Python virtual environment for Tethys. You can tell if a virtual environment
is active, because the name of it will appear in parenthesis in front of your terminal cursor:</p>
<div class="highlight-python"><div class="highlight"><pre>(tethys) $ _
</pre></div>
</div>
<p>The Tethys virtual environment must remain active for the entire installation. If you need to logout or close the
terminal in the middle of the installation, you will need to reactivate the virtual environment. This can be done
at anytime by executing the following command (don&#8217;t forget the dot):</p>
<div class="last highlight-python"><div class="highlight"><pre>. /usr/lib/tethys/bin/activate
</pre></div>
</div>
</div>
<ol class="loweralpha" start="2">
<li><p class="first">Install Tethys Platform into the virtual environment with the following commands:</p>
<div class="highlight-python"><div class="highlight"><pre>git clone https://github.com/CI-WATER/tethys /usr/lib/tethys/src
</pre></div>
</div>
</li>
<li><p class="first">Install the Python modules that Tethys requires:</p>
<div class="highlight-python"><div class="highlight"><pre>pip install -r /usr/lib/tethys/src/requirements.txt
</pre></div>
</div>
</li>
<li><p class="first">Restart the Python virtual environment:</p>
<div class="highlight-python"><div class="highlight"><pre>deactivate
. /usr/lib/tethys/bin/activate
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="create-database-and-database-users">
<h2>4. Create Database and Database Users<a class="headerlink" href="#create-database-and-database-users" title="Permalink to this headline">¶</a></h2>
<p>Create three database users with databases. You will be prompted to create passwords for each user. Take note of the
passwords, because you will need to use them in the next step.To do so, run the following commands in the terminal:</p>
<div class="highlight-python"><div class="highlight"><pre>sudo -u postgres createuser -S -D -R -P tethys_default

sudo -u postgres createdb -O tethys_default tethys_default -E utf-8

sudo -u postgres createuser -S -d -R -P tethys_db_manager

sudo -u postgres createdb -O tethys_db_manager tethys_db_manager -E utf-8

sudo -u postgres createuser --superuser -d -R -P tethys_super

sudo -u postgres createdb -O tethys_super tethys_super -E utf-8
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Run each line above one at a time to avoid errors.</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If you would like to have access to the Tethys databases through a graphical user interface such as
<a class="reference external" href="http://www.pgadmin.org/">pgAdmin III</a>, use the <strong>tethys_super</strong> database user and password as credentials
for the connection.</p>
</div>
</div>
<div class="section" id="create-settings-file-and-configure-settings">
<h2>5. Create Settings File and Configure Settings<a class="headerlink" href="#create-settings-file-and-configure-settings" title="Permalink to this headline">¶</a></h2>
<p>Create a new settings file for your Tethys Platform installation using the <strong class="command">tethys</strong> commandline utility. In the
terminal:</p>
<div class="highlight-python"><div class="highlight"><pre>tethys gen settings -d /usr/lib/tethys/src/tethys_portal
</pre></div>
</div>
<p>This will create a file called <tt class="file docutils literal"><span class="pre">settings.py</span></tt> in the directory <tt class="file docutils literal"><span class="pre">/usr/lib/tethys/src/tethys_portal</span></tt>. As the
name suggests, the <tt class="file docutils literal"><span class="pre">settings.py</span></tt> file contains all of the settings for the Tethys Platform Django project. There
are a few settings that need to be configured in this file.</p>
<p>Open the <tt class="file docutils literal"><span class="pre">settings.py</span></tt> file (<tt class="file docutils literal"><span class="pre">/usr/lib/tethys/src/tethys_portal/settings.py</span></tt>) that you just created and modify the
following settings appropriately.</p>
<p>a. Replace the password for the main Tethys Portal database, <strong>tethys_default</strong>, with the password you created
in the previous step. This is done by changing the value of the PASSWORD parameter of the DATABASES setting:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
<span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s">&#39;django.db.backends.postgresql_psycopg2&#39;</span><span class="p">,</span>
    <span class="s">&#39;NAME&#39;</span><span class="p">:</span> <span class="s">&#39;tethys_default&#39;</span><span class="p">,</span>
    <span class="s">&#39;USER&#39;</span><span class="p">:</span> <span class="s">&#39;tethys_default&#39;</span><span class="p">,</span>
    <span class="s">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s">&#39;pass&#39;</span><span class="p">,</span>
    <span class="s">&#39;HOST&#39;</span><span class="p">:</span> <span class="s">&#39;localhost&#39;</span><span class="p">,</span>
    <span class="s">&#39;PORT&#39;</span><span class="p">:</span> <span class="s">&#39;5432&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>b. Find the TETHYS_APPS_DATABASE_MANAGER_URL and TETHYS_APPS_SUPERUSER_URL settings and replace &#8220;pass&#8221; with the appropriate
passwords that you created in the previous step:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">TETHYS_APPS_DATABASE_MANAGER_URL</span> <span class="o">=</span> <span class="s">&#39;postgresql://tethys_db_manager:pass@localhost:5432/tethys_db_manager&#39;</span>
<span class="n">TETHYS_APPS_SUPERUSER_URL</span> <span class="o">=</span> <span class="s">&#39;postgresql://tethys_super:pass@localhost:5432/tethys_super&#39;</span>
</pre></div>
</div>
<p>c. Set the TETHYS_GIZMOS_GOOGLE_MAPS_API_KEY with an appropriate Google Maps v3 API key. If you do not have a Google
Maps API key, use the <a class="reference external" href="https://developers.google.com/maps/documentation/javascript/tutorial#api_key">Obtaining an API Key</a>
instructions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">TETHYS_GIZMOS_GOOGLE_MAPS_API_KEY</span> <span class="o">=</span> <span class="s">&#39;Th|$I$@neXAmpL3aPik3Y&#39;</span>
</pre></div>
</div>
<ol class="loweralpha simple" start="4">
<li>Save your changes and close the <tt class="file docutils literal"><span class="pre">settings.py</span></tt> file.</li>
</ol>
</div>
<div class="section" id="create-database-tables">
<h2>6. Create Database Tables<a class="headerlink" href="#create-database-tables" title="Permalink to this headline">¶</a></h2>
<p>Execute the Django <strong class="command">syncdb</strong> command to create the database tables. When prompted to create a system
administrator select yes. Take note of the username and password, as this will be the user you use to manage your
Tethys installation. In the terminal:</p>
<div class="highlight-python"><div class="highlight"><pre>python /usr/lib/tethys/src/manage.py syncdb
</pre></div>
</div>
</div>
<div class="section" id="start-up-the-django-development-server">
<h2>7. Start up the Django Development Server<a class="headerlink" href="#start-up-the-django-development-server" title="Permalink to this headline">¶</a></h2>
<p>You are now ready to start the Django development server and view your instance of Tethys Portal. In the terminal:</p>
<div class="highlight-python"><div class="highlight"><pre>python /usr/lib/tethys/src/manage.py runserver
</pre></div>
</div>
<p>Open <a class="reference external" href="http://127.0.0.1:8000/">http://127.0.0.1:8000/</a> in a web browser and you should see the default Tethys Portal landing page. Feel free to
login using the system administrator username and password that you created in the previous step and take a look around.</p>
</div>
<div class="section" id="what-s-next">
<h2>What&#8217;s Next?<a class="headerlink" href="#what-s-next" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#install-the-dependencies">1. Install the Dependencies</a></li>
<li><a class="reference internal" href="#configure-dependencies">2. Configure Dependencies</a></li>
<li><a class="reference internal" href="#install-tethys-platform-into-a-python-virtual-environment">3. Install Tethys Platform into a Python Virtual Environment</a></li>
<li><a class="reference internal" href="#create-database-and-database-users">4. Create Database and Database Users</a></li>
<li><a class="reference internal" href="#create-settings-file-and-configure-settings">5. Create Settings File and Configure Settings</a></li>
<li><a class="reference internal" href="#create-database-tables">6. Create Database Tables</a></li>
<li><a class="reference internal" href="#start-up-the-django-development-server">7. Start up the Django Development Server</a></li>
<li><a class="reference internal" href="#what-s-next">What&#8217;s Next?</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="features.html"
                        title="previous chapter">Tethys Platform</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="getting_started.html"
                        title="next chapter">Getting Started</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/installation.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="getting_started.html" title="Getting Started"
             >next</a> |</li>
        <li class="right" >
          <a href="features.html" title="Tethys Platform"
             >previous</a> |</li>
        <li><a href="index.html">Tethys Platform 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Nathan Swain.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>