

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>App Project Structure &mdash; Tethys Platform 0.1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Tethys Platform 0.1.0 documentation" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="index.html" class="fa fa-home"> Tethys Platform</a>
        
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="features.html">Tethys Platform</a><ul>
<li class="toctree-l2"><a class="reference internal" href="features.html#develop-web-apps">Develop Web Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#python-software-development-kit">Python Software Development Kit</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#templating-and-gizmos">Templating and Gizmos</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#spatial-data">Spatial Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#data-store">Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#computing">Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#developer-tools">Developer Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="features.html#production-ready">Production Ready</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="installation.html#install-the-dependencies">1. Install the Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#install-advanced-dependencies">2. Install Advanced Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#create-virtual-environment-and-install-tethys-platform">3. Create Virtual Environment and Install Tethys Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#create-database-and-database-users">4. Create Database and Database Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#create-settings-file-and-configure-settings">5. Create Settings File and Configure Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#create-database-tables">6. Create Database Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#start-up-the-django-development-server">7. Start up the Django Development Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="installation.html#what-s-next">What&#8217;s Next?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting_started/scaffold.html">Create a New Tethys App Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started/model.html">The Model and Persistent Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started/view.html">The View and Templating</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started/controller.html">Working with the Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started/url_mapping.html">URL Mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started/forms.html">Working with Form Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started/configuration.html">Configuring Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting_started/distribution.html">Distributing Apps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tethys_api.html">Tethys Software Development Kit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tethys_api/dataset_services.html">Dataset Services API</a></li>
<li class="toctree-l2"><a class="reference internal" href="tethys_api/persistent_store.html">Persistent Stores API</a></li>
<li class="toctree-l2"><a class="reference internal" href="tethys_api/spatial_publishing.html">Spatial Data Publishing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tethys_api/geoprocessing.html">Geoprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tethys_api/visualizing.html">Data Visualization</a></li>
<li class="toctree-l2"><a class="reference internal" href="tethys_api/cloud_computing.html">High Performance Computing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">Summary of References</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Tethys Platform</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>App Project Structure</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/app_project.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="app-project-structure">
<h1>App Project Structure<a class="headerlink" href="#app-project-structure" title="Permalink to this headline">¶</a></h1>
<p><strong>Last Updated:</strong> May 20, 2014</p>
<p>The source code for a Tethys App project is contained in a series of Python packages. <a class="reference internal" href="#app-figure-1"><em>Figure 1. An example of a Tethys App project for an app named &#8220;myapp&#8221;.</em></a> illustrates the key components of a Tethys App project for an app called &#8220;myapp&#8221;. The top level package is called the <a class="reference internal" href="glossary.html#term-release-package"><em class="xref std std-term">release package</em></a> and it contains the <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> for the app and other files that are needed to distribute the app.The key components of the <a class="reference internal" href="glossary.html#term-release-package"><em class="xref std std-term">release package</em></a> and the <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> will be explained in this article.</p>
<div class="figure" id="app-figure-1">
<img alt="diagram of a Tethys App project for an app named myapp" src="_images/app_package.png" />
<p class="caption"><strong>Figure 1. An example of a Tethys App project for an app named &#8220;myapp&#8221;.</strong></p>
</div>
<div class="section" id="release-package">
<h2>Release Package<a class="headerlink" href="#release-package" title="Permalink to this headline">¶</a></h2>
<p>As the name suggests, the release package is the package that you will use to release and develop your app. The entire <a class="reference internal" href="glossary.html#term-release-package"><em class="xref std std-term">release package</em></a> should be provided when you release your app.The name of a <a class="reference internal" href="glossary.html#term-release-package"><em class="xref std std-term">release package</em></a> follows a specific naming convention.The name of the directory should always start with &#8220;ckanapp-&#8221; followed by a <em>unique</em> name for the app. The name of the app may not have spaces, dashes, or other special characters (however, underscores are allowed). For example, <a class="reference internal" href="#app-figure-1"><em>Figure 1. An example of a Tethys App project for an app named &#8220;myapp&#8221;.</em></a> shows the project structure for an app with name &#8220;myapp&#8221;; thus, the name of the <a class="reference internal" href="glossary.html#term-release-package"><em class="xref std std-term">release package</em></a> is &#8220;ckanapp-myapp&#8221;. The name of your app should be unique with any other apps running on a CKAN instance to avoid conflicts.</p>
<p>The release package must contain a setup script (<tt class="file docutils literal"><span class="pre">setup.py</span></tt>) and <tt class="file docutils literal"><span class="pre">ckanapp</span></tt> package at a minimum. This directory would also be a good place to put any accessory files for the app such as a readme file or the license file. Nothing that is required for the app to run should be stored in this directory. The setup script is used during installation of the app to install any dependencies of your app and make Python aware of the modules in your app project. A basic setup script is generated as part of the scaffolding for a new app project. For more information on writing setup scripts refer to this article: <a class="reference external" href="http://docs.python.org/2/distutils/setupscript.html">Writing the Setup Script</a>.</p>
<p>The <tt class="file docutils literal"><span class="pre">ckanapp</span></tt> package is a <a class="reference external" href="http://docs.python.org/2/tutorial/classes.html#python-scopes-and-namespaces">Python namespace</a> package. It provides a way to mimic the production environment during development of the app (i.e.: when the app is installed, it will reside in a namespace package called <tt class="file docutils literal"><span class="pre">ckanapp</span></tt>). This package contains the <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a>, which has the same name as your app name by convention.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">When you generate a new app project using the command line tool, you will notice that many of the directories contain a <tt class="file docutils literal"><span class="pre">__init__.py</span></tt> file, many of which are empty. These are omitted in the diagram for simplicity. DO NOT DELETE THE <tt class="file docutils literal"><span class="pre">__init__.py</span></tt> FILES. These files indicate to Python that the directories that contains them are <a class="reference external" href="http://docs.python.org/2/tutorial/modules.html#packages">Python packages</a>. Your app will not work properly without the <tt class="file docutils literal"><span class="pre">__init__.py</span></tt> files.</p>
</div>
</div>
<div class="section" id="the-app-package">
<h2>The App Package<a class="headerlink" href="#the-app-package" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> contains all of the source code and resources that are needed by the Tethys Apps plugin to run your app. When your app is installed, the <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> will be copied into the <tt class="file docutils literal"><span class="pre">ckanapp</span></tt> package of the Tethys Apps plugin. As discussed in the <a class="reference internal" href="app_harvesting.html"><em>App Harvesting</em></a> section, all:term:<cite>app packages</cite> contained in the <tt class="file docutils literal"><span class="pre">ckanapp</span></tt> package of the Tethys Apps plugin will be loaded as apps when CKAN is loaded.</p>
<p>The <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> contains several files, packages, and directories including: <tt class="file docutils literal"><span class="pre">app.py</span></tt>, <tt class="file docutils literal"><span class="pre">model.py</span></tt>, <tt class="file docutils literal"><span class="pre">controllers</span></tt>, <tt class="file docutils literal"><span class="pre">templates</span></tt>, and <tt class="file docutils literal"><span class="pre">public</span></tt>. The <tt class="file docutils literal"><span class="pre">model.py</span></tt>, <tt class="file docutils literal"><span class="pre">templates</span></tt>, and <tt class="file docutils literal"><span class="pre">controllers</span></tt> file and packages correspond with the Model View Controller approach that is used to build apps. The data structures, classes, and methods that are used to interact with the data of the app are contained in the <tt class="file docutils literal"><span class="pre">model.py</span></tt> file. The <tt class="file docutils literal"><span class="pre">templates</span></tt> directory contains all the Jinja2 HTML templates that are used to generate the views of the app and the <tt class="file docutils literal"><span class="pre">controllers</span></tt> package contains Python files for each controller of the app. The <tt class="file docutils literal"><span class="pre">public</span></tt> directory is used for static resources such as images, JavaScript and CSS files. The <tt class="file docutils literal"><span class="pre">app.py</span></tt> file contains all the configuration parameters for the app. Each of these components will be discussed in more detail on the following pages.</p>
</div>
<div class="section" id="naming-conventions">
<h2>Naming Conventions<a class="headerlink" href="#naming-conventions" title="Permalink to this headline">¶</a></h2>
<p>There are a few naming conventions that need to be followed to avoid conflicts with other apps. The more obvious one is the <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> name. All <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> names must be unique. The other important naming convention is related to the public and template directories. Follow the suggested structure shown in <a class="reference internal" href="#app-figure-1"><em>Figure 1. An example of a Tethys App project for an app named &#8220;myapp&#8221;.</em></a> for public and template directories. Nest all documents that are in these directories inside a directory with the same name as your <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a>. This ensures that when your app calls for <tt class="file docutils literal"><span class="pre">index.html</span></tt> it finds the correct one and not an <tt class="file docutils literal"><span class="pre">index.html</span></tt> from another app.</p>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Nathan Swain.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>