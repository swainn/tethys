<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>App Project Structure &mdash; Tethys Platform 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Tethys Platform 0.1.0 documentation" href="index.html" />
    <link rel="next" title="Setup Development Environment" href="dev_environment.html" />
    <link rel="prev" title="App Harvesting" href="app_harvesting.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="dev_environment.html" title="Setup Development Environment"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="app_harvesting.html" title="App Harvesting"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Tethys Platform 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="app-project-structure">
<h1>App Project Structure<a class="headerlink" href="#app-project-structure" title="Permalink to this headline">¶</a></h1>
<p><strong>Last Updated:</strong> May 20, 2014</p>
<p>The source code for a Tethys App project is contained in a series of Python packages. <a class="reference internal" href="#app-figure-1"><em>Figure 1. An example of a Tethys App project for an app named &#8220;myapp&#8221;.</em></a> illustrates the key components of a Tethys App project for an app called &#8220;myapp&#8221;. The top level package is called the <a class="reference internal" href="glossary.html#term-release-package"><em class="xref std std-term">release package</em></a> and it contains the <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> for the app and other files that are needed to distribute the app.The key components of the <a class="reference internal" href="glossary.html#term-release-package"><em class="xref std std-term">release package</em></a> and the <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> will be explained in this article.</p>
<div class="figure" id="app-figure-1">
<img alt="diagram of a Tethys App project for an app named myapp" src="_images/app_package.png" />
<p class="caption"><strong>Figure 1. An example of a Tethys App project for an app named &#8220;myapp&#8221;.</strong></p>
</div>
<div class="section" id="release-package">
<h2>Release Package<a class="headerlink" href="#release-package" title="Permalink to this headline">¶</a></h2>
<p>As the name suggests, the release package is the package that you will use to release and develop your app. The entire <a class="reference internal" href="glossary.html#term-release-package"><em class="xref std std-term">release package</em></a> should be provided when you release your app.The name of a <a class="reference internal" href="glossary.html#term-release-package"><em class="xref std std-term">release package</em></a> follows a specific naming convention.The name of the directory should always start with &#8220;ckanapp-&#8221; followed by a <em>unique</em> name for the app. The name of the app may not have spaces, dashes, or other special characters (however, underscores are allowed). For example, <a class="reference internal" href="#app-figure-1"><em>Figure 1. An example of a Tethys App project for an app named &#8220;myapp&#8221;.</em></a> shows the project structure for an app with name &#8220;myapp&#8221;; thus, the name of the <a class="reference internal" href="glossary.html#term-release-package"><em class="xref std std-term">release package</em></a> is &#8220;ckanapp-myapp&#8221;. The name of your app should be unique with any other apps running on a CKAN instance to avoid conflicts.</p>
<p>The release package must contain a setup script (<tt class="file docutils literal"><span class="pre">setup.py</span></tt>) and <tt class="file docutils literal"><span class="pre">ckanapp</span></tt> package at a minimum. This directory would also be a good place to put any accessory files for the app such as a readme file or the license file. Nothing that is required for the app to run should be stored in this directory. The setup script is used during installation of the app to install any dependencies of your app and make Python aware of the modules in your app project. A basic setup script is generated as part of the scaffolding for a new app project. For more information on writing setup scripts refer to this article: <a class="reference external" href="http://docs.python.org/2/distutils/setupscript.html">Writing the Setup Script</a>.</p>
<p>The <tt class="file docutils literal"><span class="pre">ckanapp</span></tt> package is a <a class="reference external" href="http://docs.python.org/2/tutorial/classes.html#python-scopes-and-namespaces">Python namespace</a> package. It provides a way to mimic the production environment during development of the app (i.e.: when the app is installed, it will reside in a namespace package called <tt class="file docutils literal"><span class="pre">ckanapp</span></tt>). This package contains the <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a>, which has the same name as your app name by convention.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">When you generate a new app project using the command line tool, you will notice that many of the directories contain a <tt class="file docutils literal"><span class="pre">__init__.py</span></tt> file, many of which are empty. These are omitted in the diagram for simplicity. DO NOT DELETE THE <tt class="file docutils literal"><span class="pre">__init__.py</span></tt> FILES. These files indicate to Python that the directories that contains them are <a class="reference external" href="http://docs.python.org/2/tutorial/modules.html#packages">Python packages</a>. Your app will not work properly without the <tt class="file docutils literal"><span class="pre">__init__.py</span></tt> files.</p>
</div>
</div>
<div class="section" id="the-app-package">
<h2>The App Package<a class="headerlink" href="#the-app-package" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> contains all of the source code and resources that are needed by the Tethys Apps plugin to run your app. When your app is installed, the <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> will be copied into the <tt class="file docutils literal"><span class="pre">ckanapp</span></tt> package of the Tethys Apps plugin. As discussed in the <a class="reference internal" href="app_harvesting.html"><em>App Harvesting</em></a> section, all:term:<cite>app packages</cite> contained in the <tt class="file docutils literal"><span class="pre">ckanapp</span></tt> package of the Tethys Apps plugin will be loaded as apps when CKAN is loaded.</p>
<p>The <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> contains several files, packages, and directories including: <tt class="file docutils literal"><span class="pre">app.py</span></tt>, <tt class="file docutils literal"><span class="pre">model.py</span></tt>, <tt class="file docutils literal"><span class="pre">controllers</span></tt>, <tt class="file docutils literal"><span class="pre">templates</span></tt>, and <tt class="file docutils literal"><span class="pre">public</span></tt>. The <tt class="file docutils literal"><span class="pre">model.py</span></tt>, <tt class="file docutils literal"><span class="pre">templates</span></tt>, and <tt class="file docutils literal"><span class="pre">controllers</span></tt> file and packages correspond with the Model View Controller approach that is used to build apps. The data structures, classes, and methods that are used to interact with the data of the app are contained in the <tt class="file docutils literal"><span class="pre">model.py</span></tt> file. The <tt class="file docutils literal"><span class="pre">templates</span></tt> directory contains all the Jinja2 HTML templates that are used to generate the views of the app and the <tt class="file docutils literal"><span class="pre">controllers</span></tt> package contains Python files for each controller of the app. The <tt class="file docutils literal"><span class="pre">public</span></tt> directory is used for static resources such as images, JavaScript and CSS files. The <tt class="file docutils literal"><span class="pre">app.py</span></tt> file contains all the configuration parameters for the app. Each of these components will be discussed in more detail on the following pages.</p>
</div>
<div class="section" id="naming-conventions">
<h2>Naming Conventions<a class="headerlink" href="#naming-conventions" title="Permalink to this headline">¶</a></h2>
<p>There are a few naming conventions that need to be followed to avoid conflicts with other apps. The more obvious one is the <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> name. All <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a> names must be unique. The other important naming convention is related to the public and template directories. Follow the suggested structure shown in <a class="reference internal" href="#app-figure-1"><em>Figure 1. An example of a Tethys App project for an app named &#8220;myapp&#8221;.</em></a> for public and template directories. Nest all documents that are in these directories inside a directory with the same name as your <a class="reference internal" href="glossary.html#term-app-package"><em class="xref std std-term">app package</em></a>. This ensures that when your app calls for <tt class="file docutils literal"><span class="pre">index.html</span></tt> it finds the correct one and not an <tt class="file docutils literal"><span class="pre">index.html</span></tt> from another app.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">App Project Structure</a><ul>
<li><a class="reference internal" href="#release-package">Release Package</a></li>
<li><a class="reference internal" href="#the-app-package">The App Package</a></li>
<li><a class="reference internal" href="#naming-conventions">Naming Conventions</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="app_harvesting.html"
                        title="previous chapter">App Harvesting</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="dev_environment.html"
                        title="next chapter">Setup Development Environment</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/app_project.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="dev_environment.html" title="Setup Development Environment"
             >next</a> |</li>
        <li class="right" >
          <a href="app_harvesting.html" title="App Harvesting"
             >previous</a> |</li>
        <li><a href="index.html">Tethys Platform 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Nathan Swain.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>