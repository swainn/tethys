

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Distributing Apps &mdash; Tethys Platform 0.1.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/default_favicon.ico"/>
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Tethys Platform 0.1.0 documentation" href="../index.html"/>
        <link rel="up" title="Getting Started" href="../getting_started.html"/>
        <link rel="next" title="Software Development Kit" href="../tethys_sdk.html"/>
        <link rel="prev" title="User Input and Forms" href="forms.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> Tethys Platform</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../features.html#develop-web-apps">Develop Web Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#python-software-development-kit">Python Software Development Kit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#templating-and-gizmos">Templating and Gizmos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#developer-tools">Developer Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#spatial-data">Spatial Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#data-store">Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#computing">Computing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#production-ready">Production Ready</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html#acknowledgements">Acknowledgements</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation/linux.html">Installation on Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/mac.html">Installation on Mac OSX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation/web_admin_setup.html">Web Admin Setup</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../getting_started.html">Getting Started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="scaffold.html">Create a New Tethys App Project</a></li>
<li class="toctree-l2"><a class="reference internal" href="model.html">The Model and Persistent Stores</a></li>
<li class="toctree-l2"><a class="reference internal" href="view.html">The View and Templating</a></li>
<li class="toctree-l2"><a class="reference internal" href="controller.html">The Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="url_mapping.html">URL Mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="url_variables.html">Advanced Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="forms.html">User Input and Forms</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Distributing Apps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tethys_sdk.html">Software Development Kit</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/app_class.html">App Base Class API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/templating.html">App Templating API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/gizmos.html">Template Gizmos API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/dataset_services.html">Dataset Services API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/spatial_publishing.html">Spatial Dataset Services API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/persistent_store.html">Persistent Stores API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/spatial_persistent_store.html">Spatial Persistent Stores API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/geoprocessing.html">Web Processing Services API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/cloud_computing.html">Distributed Computing API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_sdk/tethys_cli.html">Command Line Interface</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tethys_portal.html">Tethys Portal</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tethys_portal.html#administrator">Administrator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_portal.html#customize">Customize</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_portal.html#manage-users-and-permissions">Manage Users and Permissions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../production.html">Production Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../production.html#install-tethys-portal">1. Install Tethys Portal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../production.html#install-apache-and-dependencies">2. Install Apache and Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../production.html#make-baseline-virtual-environment">3. Make BASELINE Virtual Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../production.html#set-wsgi-python-home">4. Set WSGI Python Home</a></li>
<li class="toctree-l2"><a class="reference internal" href="../production.html#make-directory-for-static-files">5. Make Directory for Static Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="../production.html#set-secure-settings">6. Set Secure Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../production.html#create-apache-site-configuration-file">7. Create Apache Site Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../production.html#install-apps">8. Install Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../production.html#setup-the-persistent-stores-for-apps">9. Setup the Persistent Stores for Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../production.html#run-collect-static">10. Run Collect Static</a></li>
<li class="toctree-l2"><a class="reference internal" href="../production.html#enable-site-and-restart-apache">11. Enable Site and Restart Apache</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../repos.html">Source Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tethys_development.html">Develop Tethys</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tethys_development/installation.html">Development Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_development/overview.html">Tethys Development Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tethys_development/docker.html">Docker Development</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../supplementary.html">Supplementary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/key_concepts.html">Key Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/app_project.html">App Project Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/terminal_quick_guide.html">Terminal Quick Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/install_ubuntu.html">Ubuntu Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/ckan_troubleshooting.html">CKAN Installation Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/docker_testing.html">Test Docker Containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/pgadmin.html">PGAdmin III Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supplementary/dev_environment.html">Setup Development Environment !</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../summary.html">Summary of References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Tethys Platform</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../getting_started.html">Getting Started</a> &raquo;</li>
      
    <li>Distributing Apps</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/getting_started/distribution.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="distributing-apps">
<h1>Distributing Apps<a class="headerlink" href="#distributing-apps" title="Permalink to this headline">¶</a></h1>
<p><strong>Last Updated:</strong> November 17, 2014</p>
<p>Once your app is complete, you will likely want to distribute it for others to use or at the very least install it in a production Tethys Platform environment. When you share your app with others, you will share the entire <a class="reference internal" href="../glossary.html#term-release-package"><em class="xref std std-term">release package</em></a>, which is the outermost directory of your <a class="reference internal" href="../glossary.html#term-app-project"><em class="xref std std-term">app project</em></a>. For these tutorials, your release package is called &#8220;tethysapp-my_first_app&#8221;.</p>
<p>The release package contains the source code for your app and a <a class="reference internal" href="../glossary.html#term-setup-script"><em class="xref std std-term">setup script</em></a> (<tt class="file docutils literal"><span class="pre">setup.py</span></tt>). You may also wish to include a README file and a LICENSE file in this directory. The <a class="reference internal" href="../glossary.html#term-setup-script"><em class="xref std std-term">setup script</em></a> can be used to streamline installation of your app and any Python dependencies it may have. You already used the <a class="reference internal" href="../glossary.html#term-setup-script"><em class="xref std std-term">setup script</em></a> without realizing it in the <a class="reference internal" href="scaffold.html"><em>Create a New Tethys App Project</em></a> tutorial when you installed your app for the first time (this command: <tt class="docutils literal"><span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">develop</span></tt>). A brief introduction to the <a class="reference internal" href="../glossary.html#term-setup-script"><em class="xref std std-term">setup script</em></a> will be provided in this tutorial.</p>
<div class="section" id="setup-script">
<h2>Setup Script<a class="headerlink" href="#setup-script" title="Permalink to this headline">¶</a></h2>
<p>When you generate your app using the scaffold, it will automatically generate a <a class="reference internal" href="../glossary.html#term-setup-script"><em class="xref std std-term">setup script</em></a> (<tt class="file docutils literal"><span class="pre">setup.py</span></tt>). Open the <a class="reference internal" href="../glossary.html#term-setup-script"><em class="xref std std-term">setup script</em></a> for your app located at <tt class="file docutils literal"><span class="pre">~/tethysdev/tethysapp-my_first_app/setup.py</span></tt>. It should look something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>
<span class="kn">from</span> <span class="nn">tethys_apps.app_installation</span> <span class="kn">import</span> <span class="n">custom_develop_command</span><span class="p">,</span> <span class="n">custom_install_command</span>

<span class="c">### Apps Definition ###</span>
<span class="n">app_package</span> <span class="o">=</span> <span class="s">&#39;my_first_app&#39;</span>
<span class="n">release_package</span> <span class="o">=</span> <span class="s">&#39;tethysapp-&#39;</span> <span class="o">+</span> <span class="n">app_package</span>
<span class="n">app_class</span> <span class="o">=</span> <span class="s">&#39;my_first_app.app:MyFirstApp&#39;</span>
<span class="n">app_package_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">__file__</span><span class="p">)),</span> <span class="s">&#39;tethysapp&#39;</span><span class="p">,</span> <span class="n">app_package</span><span class="p">)</span>

<span class="c">### Python Dependencies ###</span>
<span class="n">dependencies</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="n">release_package</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s">&#39;0.0&#39;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="n">long_description</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="n">keywords</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="n">author_email</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="n">license</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;ez_setup&#39;</span><span class="p">,</span> <span class="s">&#39;examples&#39;</span><span class="p">,</span> <span class="s">&#39;tests&#39;</span><span class="p">]),</span>
    <span class="n">namespace_packages</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;tethysapp&#39;</span><span class="p">,</span> <span class="s">&#39;tethysapp.&#39;</span> <span class="o">+</span> <span class="n">app_package</span><span class="p">],</span>
    <span class="n">include_package_data</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">zip_safe</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="n">dependencies</span><span class="p">,</span>
    <span class="n">cmdclass</span><span class="o">=</span><span class="p">{</span>
        <span class="s">&#39;install&#39;</span><span class="p">:</span> <span class="n">custom_install_command</span><span class="p">(</span><span class="n">app_package</span><span class="p">,</span> <span class="n">app_package_dir</span><span class="p">,</span> <span class="n">dependencies</span><span class="p">),</span>
        <span class="s">&#39;develop&#39;</span><span class="p">:</span> <span class="n">custom_develop_command</span><span class="p">(</span><span class="n">app_package</span><span class="p">,</span> <span class="n">app_package_dir</span><span class="p">,</span> <span class="n">dependencies</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
<p>As a general rule, you should never modify the parameters under the &#8220;Apps Definition&#8221; heading. These parameters are used by the <a class="reference internal" href="../glossary.html#term-setup-script"><em class="xref std std-term">setup script</em></a> to find the source code for your app and changing their values could result in your app not working properly. If you use Python libraries that are external to your app or Tethys Platform, you will need add the library name to the <tt class="docutils literal"><span class="pre">dependencies</span></tt> list in the <a class="reference internal" href="../glossary.html#term-setup-script"><em class="xref std std-term">setup script</em></a>. These libraries will automatically be installed when your app is installed.</p>
<p>The final part of the setup script makes a call to the <tt class="docutils literal"><span class="pre">setup()</span></tt> function that is provided by the <tt class="docutils literal"><span class="pre">setuptools</span></tt> library. You will see the metadata that you defined during the scaffold process listed here. As you release subsequent versions of your app, you may wish to increment the <tt class="docutils literal"><span class="pre">version</span></tt> parameter of this function.</p>
</div>
<div class="section" id="setup-script-installation">
<h2>Setup Script Installation<a class="headerlink" href="#setup-script-installation" title="Permalink to this headline">¶</a></h2>
<p>The setup script is used to install your app and there are two types of installation that can be performed: <tt class="docutils literal"><span class="pre">install</span></tt> and <tt class="docutils literal"><span class="pre">develop</span></tt>. The <tt class="docutils literal"><span class="pre">install</span></tt> type of installation hard copies the source code of your app into the <tt class="file docutils literal"><span class="pre">site-packages</span></tt> directory of your Python installation. The <tt class="file docutils literal"><span class="pre">site-packages</span></tt> directory is where Python keeps all of the code for external modules and libraries that have been installed.</p>
<p>This is the type of installation you would use for a completed app that is being installed in a production environment. To perform this type of installation, open a terminal, change into the <a class="reference internal" href="../glossary.html#term-release-package"><em class="xref std std-term">release package</em></a> directory of your app, and run the <tt class="docutils literal"><span class="pre">install</span></tt> command on the <a class="reference internal" href="../glossary.html#term-setup-script"><em class="xref std std-term">setup script</em></a> as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>cd ~/tethysdev/tethysapp-my_first_app
python setup.py install
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">install</span></tt> type of installation is not well suited for working with your app during development, because you would need to reinstall it (i.e.: run the commands above) every time you made a change to the app source code. This is why the <tt class="docutils literal"><span class="pre">develop</span></tt> type of installation exists. When an app is installed with the <tt class="docutils literal"><span class="pre">develop</span></tt> command, the source code for your app is only linked to the <tt class="file docutils literal"><span class="pre">site-packages</span></tt> directory. This allows you to change your code and test the changes without reinstalling the app.</p>
<p>You already performed this type of installation on your app during the <a class="reference internal" href="scaffold.html"><em>Create a New Tethys App Project</em></a> tutorial. To perform this type of installation, open a terminal, change into the <a class="reference internal" href="../glossary.html#term-release-package"><em class="xref std std-term">release package</em></a> directory, and run the <tt class="docutils literal"><span class="pre">develop</span></tt> command on the <a class="reference internal" href="../glossary.html#term-setup-script"><em class="xref std std-term">setup script</em></a> like so:</p>
<div class="highlight-python"><div class="highlight"><pre>cd ~/tethysdev/tethysapp-my_first_app
python setup.py develop
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">For more information about <tt class="docutils literal"><span class="pre">setuptools</span></tt> and the <a class="reference internal" href="../glossary.html#term-setup-script"><em class="xref std std-term">setup script</em></a>, see the <a class="reference external" href="https://pythonhosted.org/setuptools/setuptools.html">Setuptools Documentation</a>.</p>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../tethys_sdk.html" class="btn btn-neutral float-right" title="Software Development Kit"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="forms.html" class="btn btn-neutral" title="User Input and Forms"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Nathan Swain.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>